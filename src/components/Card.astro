---
import { formatDate } from "../utils";
import { urlFor } from "../utils/image";

const { post } = Astro.props;
---

<div class="card">
  {
    post.mainImage ? (
      <img
        class="card__cover"
        src={urlFor(post.mainImage).width(500).height(300).url()}
        alt="Cover image"
      />
    ) : (
      <div class="card__cover--none" />
    )
  }
  <div class="card__container">
    <h3 class="card__title">
      <a
        class="card__link"
        href={`/post/${post.slug.current}`}
      >
        {post.title}
      </a>
    </h3>
    <p class="card__excerpt">{post.excerpt}</p>
    <p class="card__date">
      {formatDate(post._createdAt)}
    </p>
  </div>
</div>